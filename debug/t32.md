# t32调试

## just connect 脚本如下:  
```connect.cmm
SYStem.JtagClock 30mhz

;Depends on how you log in to the shared file, right

&WINDOWS_PATH="Z:\data\test_proj"
&BUILD_PATH="/home/user/data/test_proj"

sYmbol.SourcePATH.SetRecurseDir  "&(WINDOWS_PATH)"
sYmbol.SourcePATH.Translate  "&(BUILD_PATH)"  "&(WINDOWS_PATH)"
data.load.elf  "&(WINDOWS_PATH)\bin\case.elf"  /path  "&(WINDOWS_PATH)" /nocode
list
```
+ 使用代码窗口的mode展开汇编

## 查看exception原因
## Cortex-A55
+ 路径Cortex-A55 --> System Control and Configuration --> EC (Breakpoint/lower level)/(data abort). 当同步异常的时候首先查看最后的func/指令地址 :elr寄存器/x30，

## 异常后排除方法
* 如果同步异常后，elr寄存器会保存最后返回的指令地址，如下描述，来自于手册`DDI0487E_a_armv8_arm.pdf` 不通的el对应不同的ELR, 下次可以打断点到该位置进行step指令运行，查看具体原因，也可以使用trace功能，但会比较麻烦，目前只在ds5上进行过trace功能的测试
```
《DDI0487E_a_armv8_arm.pdf》
Exception Link Registers (ELRs)
Exception Link Registers hold preferred exception return addresses.
Whenever the PE takes an exception, the preferred return address is saved in the ELR at the Exception level the
exception is taken to. For example, whenever the PE takes an exception to EL1, the preferred return address is saved
in ELR_EL1.
On an exception return, the PC is restored to the address stored in the ELR. For example, on returning from EL1,
the PC is restored to the address stored in ELR_EL1.
AArch64 state provides an ELR for each Exception level exceptions can be taken to. The ELRs that AArch64 state
provides are:
• ELR_EL1, for exceptions taken to EL1.
• If EL2 is implemented, ELR_EL2, for exceptions taken to EL2.
• If EL3 is implemented, ELR_EL3, for exceptions taken to EL3.
On taking an exception from AArch32 state to AArch64 state, bits[63:32] of the ELR are set to zero.
```

## 如何使用trace功能 
