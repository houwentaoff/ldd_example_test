# 移植OS

## threadX  
+ `os`中有现成的`smp`代码，直接使用即可  
+ 找到对于`a55`下的`smp`目录，其他目录均可删除掉  
+ `start.S`中默认是`core0`为主`core`，若自己使用不是需要修改  
+ `mmu`可使用`os`的`demo`,而后修改为自己的  
+ `ld`文件需要修改`gic`和外设对应的地址  

### 需要添加
+ 定时器. 给`OS`以`tick`    
+ 其它`core`上电和重写`warmingrst`寄存器用来设在其它`core`上电后的地址  
+ `core`的个数，一般默认为`4` 还有对应的`mask`.  
+ `mmu enable`就能使用串口对应的物理地址等.`disable`的时候注意`ldr`是要访问对齐地址的否则会异常   
+ 注意`threadx` 线程的堆栈大小是否会超界.  
+ 部分宏需要打开，如`OS`运行在`el3/el1` 是不是`cortexA-v2`架构等:不知道那些打开，t32debug时单步挂异常能看到  

做了上述操作后系统默认的demo基本就可以跑起来了,比较简单`3`天工作量即可  
